<div class="chat-container">
  <!-- SÃ©lection du rÃ´le (affichÃ© au dÃ©marrage) -->
  <div *ngIf="showRoleSelection" class="role-selection">
    <h2>Bienvenue dans le Chat</h2>
    <p>Veuillez sÃ©lectionner votre rÃ´le:</p>
    <div class="role-buttons">
      <button class="role-btn client-btn" (click)="selectRole('client')">
        ðŸ‘¤ Je suis un Client
      </button>
      <button class="role-btn helpdesk-btn" (click)="selectRole('helpdesk')">
        ðŸŽ§ Je suis le Helpdesk
      </button>
    </div>
  </div>

  <!-- Interface de chat (affichÃ© aprÃ¨s sÃ©lection du rÃ´le) -->
  <div *ngIf="!showRoleSelection">
    <!-- Barre de statut de connexion -->
    <div class="connection-status" [ngClass]="connectionStatus.includes('ConnectÃ©') ? 'connected' : 'disconnected'">
      {{ connectionStatus }}
    </div>
    
    <!-- Affichage des messages -->
    <div class="messages">
      <div *ngFor="let msg of messages" 
           [ngClass]="{
             'sent': msg.sender === sessionId, 
             'received': msg.sender !== sessionId,
             'client-message': msg.sender === 'client',
             'helpdesk-message': msg.sender === 'helpdesk'
           }">
        <span class="sender">{{ msg.sender === sessionId ? 'Vous' : getRoleDisplayName(msg.sender) }}</span>
        <span class="message-text">{{ msg.text }}</span>
      </div>
    </div>
    
    <!-- Zone de saisie -->
    <div class="input-area">
      <input 
        type="text" 
        [(ngModel)]="message" 
        placeholder="Tapez votre message ici..." 
        (keyup.enter)="sendMessage()"
        [disabled]="isLoading"
      />
      <button (click)="sendMessage()" [disabled]="isLoading">
        {{ isLoading ? 'Envoi...' : 'Envoyer' }}
      </button>
    </div>
  </div>
</div>
